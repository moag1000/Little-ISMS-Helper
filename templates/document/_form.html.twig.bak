{#
    Document Form Partial (Accessible)
    Used by both new.html.twig and edit.html.twig
    WCAG 2.1 AA Compliant
#}

{% trans_default_domain 'documents' %}

{# Basic Information #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        {{ 'document.section.basic_info'|trans({}, 'document') }}
    </legend>

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.name,
                'label': 'document.field.name'|trans({}, 'document'),
                'help': 'document.help.name'|trans({}, 'document'),
                'required': true
            } %}
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.description,
                'label': 'document.field.description'|trans({}, 'document'),
                'help': 'document.help.description'|trans({}, 'document')
            } %}
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.documentType,
                'label': 'document.field.document_type'|trans({}, 'document'),
                'help': 'document.help.document_type'|trans({}, 'document'),
                'required': true
            } %}
        </div>
    </div>
</fieldset>

{# File Upload #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-cloud-upload" aria-hidden="true"></i>
        {{ 'document.section.file_upload'|trans({}, 'document') }}
    </legend>

    {% if is_edit_mode|default(false) %}
        <div class="alert alert-info" role="status">
            <i class="bi bi-info-circle" aria-hidden="true"></i>
            {{ 'document.help.edit_file'|trans({}, 'document') }}
        </div>
    {% endif %}

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.file,
                'label': 'document.field.file'|trans({}, 'document'),
                'help': is_edit_mode|default(false)
                    ? ('document.help.file_edit'|trans({}, 'document')'))
                    : ('document.help.file'|trans({}, 'document')),
                'required': not is_edit_mode|default(false)
            } %}
        </div>
    </div>
</fieldset>

{# Form Actions #}
<div class="form-actions d-flex gap-2 justify-content-end">
    <a href="{{ path('app_document_index') }}"
       class="btn btn-secondary">
        <i class="bi bi-x-circle" aria-hidden="true"></i>
        {{ 'common.cancel'|trans({}, 'messages') }}
    </a>

    <button type="submit" class="btn btn-primary">
        <i class="{{ button_icon|default('bi-save') }}" aria-hidden="true"></i>
        {{ button_label|default('common.save'|trans({}, 'messages')) }}
    </button>
</div>
