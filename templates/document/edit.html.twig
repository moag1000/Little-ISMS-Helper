{% extends 'base.html.twig' %}
{% trans_default_domain 'documents' %}

{% block title %}{{ 'document.edit'|trans({}, 'document') }} - {{ parent() }}{% endblock %}

{% block body %}
{# Breadcrumb Navigation #}
{% include '_components/_breadcrumb.html.twig' with {
    breadcrumbs: [
        { label: 'nav.documents'|trans({}, 'nav', 'nav'), url: path('app_document_index'), icon: 'bi-file-earmark-text' },
        { label: document.originalFilename, url: path('app_document_show', {id: document.id}) },
        { label: 'document.edit'|trans({}, 'document') }
    ]
} %}

{# Page Header #}
{% include '_components/_page_header.html.twig' with {
    title: 'document.edit'|trans({}, 'document') ~ ': ' ~ document.originalFilename,
    icon: 'bi-pencil',
    actions: [
        { label: 'common.back'|trans({}, 'messages'), url: path('app_document_show', {id: document.id}), variant: 'secondary', icon: 'bi-arrow-left' }
    ]
} %}

<div class="card">
    <div class="card-body">
        <div class="alert alert-info" role="status">
            <i class="bi bi-info-circle" aria-hidden="true"></i>
            {{ 'document.help.edit_file'|trans({}, 'document') }}
        </div>

        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            {% include '_components/_auto_form.html.twig' with {
                'form': form,
                'sections': {
                    'basic_info': {
                        'label': 'document.section.basic_info'|trans({}, 'document'),
                        'fields': ['originalFilename', 'description', 'category']
                    },
                    'file_upload': {
                        'label': 'document.section.file_upload'|trans({}, 'document'),
                        'fields': ['file']
                    }
                },
                'col_widths': {
                    'originalFilename': 12,
                    'description': 12,
                    'category': 6,
                    'file': 12
                }
            } %}

            <div class="form-actions d-flex gap-2 justify-content-end">
                <a href="{{ path('app_document_show', {id: document.id}) }}" class="btn btn-secondary">
                    <i class="bi bi-x-circle" aria-hidden="true"></i>
                    {{ 'common.cancel'|trans({}, 'messages') }}
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-circle" aria-hidden="true"></i>
                    {{ 'document.action.update'|trans({}, 'document') }}
                </button>
            </div>
        {{ form_end(form) }}
    </div>
</div>

{# Delete Danger Zone #}
<div class="card border-danger mt-4">
    <div class="card-header bg-danger text-white">
        <h2 class="mb-0">
            <i class="bi bi-exclamation-triangle" aria-hidden="true"></i>
            {{ 'common.danger_zone'|trans({}, 'messages') }}
        </h2>
    </div>
    <div class="card-body">
        <p class="text-muted">
            {{ 'document.delete_warning'|trans({}, 'document') }}
        </p>
        {{ include('document/_delete_form.html.twig') }}
    </div>
</div>
{% endblock %}
