{#
    Document Form Partial (Accessible)
    Used by both new.html.twig and edit.html.twig
    WCAG 2.1 AA Compliant
#}

{% trans_default_domain 'documents' %}

{# Basic Information #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        {{ 'document.section.basic_info'|trans({}, 'document') }}
    </legend>

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.originalFilename,
                'label_key': 'document.field.name',
                'help_key': 'document.help.name',
                'translation_domain': 'documents',
                'required': false
            } %}
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.description,
                'label_key': 'document.field.description',
                'help_key': 'document.help.description',
                'translation_domain': 'documents'
            } %}
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.category,
                'label_key': 'document.field.document_type',
                'help_key': 'document.help.document_type',
                'translation_domain': 'documents',
                'required': true
            } %}
        </div>
    </div>
</fieldset>

{# File Upload #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-cloud-upload" aria-hidden="true"></i>
        {{ 'document.section.file_upload'|trans({}, 'document') }}
    </legend>

    {% if is_edit_mode|default(false) %}
        <div class="alert alert-info" role="status">
            <i class="bi bi-info-circle" aria-hidden="true"></i>
            {{ 'document.help.edit_file'|trans({}, 'document') }}
        </div>
    {% endif %}

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.file,
                'label_key': 'document.field.file',
                'help_key': is_edit_mode|default(false)
                    ? 'document.help.file_edit'
                    : 'document.help.file',
                'translation_domain': 'documents',
                'required': not is_edit_mode|default(false)
            } %}
        </div>
    </div>
</fieldset>

{# Form Actions #}
<div class="form-actions d-flex gap-2 justify-content-end">
    <a href="{{ path('app_document_index') }}"
       class="btn btn-secondary">
        <i class="bi bi-x-circle" aria-hidden="true"></i>
        {{ "common.cancel"|trans({}, "messages") }}
    </a>

    <button type="submit" class="btn btn-primary">
        <i class="{{ button_icon|default("bi-save") }}" aria-hidden="true"></i>
        {{ button_label|default("common.save"|trans({}, "messages")) }}
    </button>
</div>
