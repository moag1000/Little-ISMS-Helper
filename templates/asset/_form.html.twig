{#
    Asset Form Partial (Accessible)
    Used by both new.html.twig and edit.html.twig

    WCAG 2.1 AA Compliant Form with:
    - Proper ARIA attributes
    - Error handling
    - Help texts
    - Required field indicators
#}

{% trans_default_domain 'assets' %}

{# Basic Information Section #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        {{ 'assets.section.basic_info'|trans|default('Grundinformationen') }}
    </legend>

    <div class="row">
        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.name,
                'label': 'assets.field.name'|trans|default('Name'),
                'help': 'assets.help.name'|trans|default('Eindeutiger Name des Assets'),
                'required': true
            } %}
        </div>

        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.assetType,
                'label': 'assets.field.type'|trans|default('Asset-Typ'),
                'help': 'assets.help.type'|trans|default('Kategorie des Assets (Hardware, Software, Daten, etc.)'),
                'required': true
            } %}
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            {% include '_components/_form_field.html.twig' with {
                'field': form.description,
                'label': 'assets.field.description'|trans|default('Beschreibung'),
                'help': 'assets.help.description'|trans|default('Detaillierte Beschreibung des Assets und seiner Funktion')
            } %}
        </div>
    </div>
</fieldset>

{# Assignment Section #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-person-badge" aria-hidden="true"></i>
        {{ 'assets.section.assignment'|trans|default('Zuordnung') }}
    </legend>

    <div class="row">
        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.owner,
                'label': 'assets.field.owner'|trans|default('Eigentümer'),
                'help': 'assets.help.owner'|trans|default('Verantwortliche Person für dieses Asset')
            } %}
        </div>

        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.location,
                'label': 'assets.field.location'|trans|default('Standort'),
                'help': 'assets.help.location'|trans|default('Physischer oder logischer Standort des Assets')
            } %}
        </div>
    </div>
</fieldset>

{# Financial Information Section #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-currency-dollar" aria-hidden="true"></i>
        {{ 'assets.section.financial'|trans|default('Finanzielle Informationen') }}
    </legend>

    <div class="row">
        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.acquisitionValue,
                'label': 'assets.field.acquisition_value'|trans|default('Anschaffungswert'),
                'help': 'assets.help.acquisition_value'|trans|default('Ursprünglicher Kaufpreis oder Anschaffungskosten')
            } %}
        </div>

        <div class="col-md-6">
            {% include '_components/_form_field.html.twig' with {
                'field': form.currentValue,
                'label': 'assets.field.current_value'|trans|default('Aktueller Wert'),
                'help': 'assets.help.current_value'|trans|default('Geschätzter aktueller Marktwert')
            } %}
        </div>
    </div>
</fieldset>

{# CIA Values Section (Information Security) #}
<fieldset class="mb-4">
    <legend class="h5 mb-3">
        <i class="bi bi-shield-lock" aria-hidden="true"></i>
        {{ 'assets.section.cia_values'|trans|default('CIA-Bewertung (Schutzbedarf)') }}
    </legend>

    <div class="alert alert-info" role="status">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        {{ 'assets.cia_help'|trans|default('Bewerten Sie den Schutzbedarf nach Vertraulichkeit, Integrität und Verfügbarkeit (1=sehr niedrig, 5=sehr hoch)') }}
    </div>

    <div class="row">
        <div class="col-md-4">
            {% include '_components/_form_field.html.twig' with {
                'field': form.confidentialityValue,
                'label': 'assets.field.confidentiality'|trans|default('Vertraulichkeit'),
                'help': 'assets.help.confidentiality'|trans|default('Schutzbedarf bzgl. Vertraulichkeit der Informationen')
            } %}
        </div>

        <div class="col-md-4">
            {% include '_components/_form_field.html.twig' with {
                'field': form.integrityValue,
                'label': 'assets.field.integrity'|trans|default('Integrität'),
                'help': 'assets.help.integrity'|trans|default('Schutzbedarf bzgl. Unversehrtheit und Korrektheit der Daten')
            } %}
        </div>

        <div class="col-md-4">
            {% include '_components/_form_field.html.twig' with {
                'field': form.availabilityValue,
                'label': 'assets.field.availability'|trans|default('Verfügbarkeit'),
                'help': 'assets.help.availability'|trans|default('Schutzbedarf bzgl. ständiger Erreichbarkeit und Nutzbarkeit')
            } %}
        </div>
    </div>
</fieldset>

{# Form Actions #}
<div class="form-actions d-flex gap-2 justify-content-end">
    <a href="{{ path('app_asset_index') }}"
       class="btn btn-secondary">
        <i class="bi bi-x-circle" aria-hidden="true"></i>
        {{ 'common.cancel'|trans({}, 'messages') }}
    </a>

    <button type="submit" class="btn btn-primary">
        <i class="{{ button_icon|default('bi-save') }}" aria-hidden="true"></i>
        {{ button_label|default('common.save'|trans({}, 'messages')) }}
    </button>
</div>
