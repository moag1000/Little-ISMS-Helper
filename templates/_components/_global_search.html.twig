{# Global Search Component
   Usage: {% include '_components/_global_search.html.twig' %}

   Keyboard Shortcut: Cmd+K / Ctrl+K
   Features:
   - Instant search across all entities
   - Keyboard navigation
   - Categorized results
#}

<div data-controller="search"
     data-search-search-url-value="{{ path('app_api_search') }}"
     data-search-min-chars-value="2"
     data-search-debounce-delay-value="300">

    {# Search Trigger Button (visible in navbar) #}
    <button type="button"
            class="btn btn-outline-secondary btn-sm global-search-trigger"
            data-action="click->search#open"
            title="{{ 'ui.global_search.trigger_title'|trans({}, 'ui') }}">
        <i class="bi bi-search" aria-hidden="true"></i>
        <span class="d-none d-md-inline ms-2">{{ 'ui.global_search.label'|trans({}, 'ui') }}</span>
        <span class="d-none d-lg-inline ms-2">
            <kbd class="bg-light">⌘K</kbd>
        </span>
    </button>

    {# Search Modal #}
    <div class="global-search-modal d-none"
         data-search-target="modal"
         data-action="click->search#handleBackdropClick keydown->search#handleKeydown">

        <div class="global-search-container">
            {# Search Header #}
            <div class="global-search-header">
                <i class="bi bi-search text-muted" aria-hidden="true"></i>
                <label>
                    <input type="text"
                           class="global-search-input"
                           placeholder="{{ 'ui.global_search.placeholder'|trans({}, 'ui') }}"
                           data-search-target="input"
                           data-action="input->search#search keydown->search#handleKeydown"
                           autocomplete="off"
                           spellcheck="false">
                </label>
                <div class="global-search-shortcuts">
                    <kbd>↑↓</kbd> {{ 'ui.keyboard.navigation'|trans({}, 'ui') }}
                    <kbd>↵</kbd> {{ 'ui.keyboard.select'|trans({}, 'ui') }}
                    <kbd>ESC</kbd> {{ 'ui.keyboard.close'|trans({}, 'ui') }}
                </div>
            </div>

            {# Search Results #}
            <div class="global-search-results" data-search-target="results">
                {# Results will be dynamically inserted here #}
            </div>

            {# Search Footer #}
            <div class="global-search-footer">
                <div class="text-muted small">
                    <i class="bi bi-lightning" aria-hidden="true"></i>
                    {{ 'ui.global_search.tip'|trans({}, 'ui')|raw }}
                </div>
            </div>
        </div>
    </div>
</div>
