{% extends 'base.html.twig' %}
{% trans_default_domain 'risk_treatment_plan' %}

{% block title %}{{ 'risk_treatment_plan.new'|trans({}, 'risk_treatment_plan') }} - {{ 'app.title'|trans({}, 'messages') }}{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'nav.risk_treatment_plans'|trans({}, 'nav'), url: path('app_risk_treatment_plan_index') },
            { label: 'risk_treatment_plan.new'|trans({}, 'risk_treatment_plan') }
        ]
    } %}
</div>

<div class="page-header">
    <div>
        <h1><i class="bi bi-plus-circle" aria-hidden="true"></i> {{ 'risk_treatment_plan.new'|trans({}, 'risk_treatment_plan') }}</h1>
        <p class="text-muted">{{ 'risk_treatment_plan.new_description'|trans({}, 'risk_treatment_plan') }}</p>
    </div>
    <div class="button-group">
        <a href="{{ path('app_risk_treatment_plan_index') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left" aria-hidden="true"></i> {{ 'common.back'|trans({}, 'messages') }}
        </a>
    </div>
</div>

{{ form_start(form) }}

{% include '_components/_auto_form.html.twig' with {
    'form': form,
    'sections': {
        'basic_info': {
            'label': 'risk_treatment_plan.section.basic_info'|trans({}, 'risk_treatment_plan'),
            'fields': ['risk', 'title', 'description']
        },
        'status_progress': {
            'label': 'risk_treatment_plan.section.status_progress'|trans({}, 'risk_treatment_plan'),
            'fields': ['status', 'priority', 'completionPercentage']
        },
        'timeline': {
            'label': 'risk_treatment_plan.section.timeline'|trans({}, 'risk_treatment_plan'),
            'fields': ['startDate', 'targetCompletionDate', 'actualCompletionDate']
        },
        'responsibility_resources': {
            'label': 'risk_treatment_plan.section.responsibility_resources'|trans({}, 'risk_treatment_plan'),
            'fields': ['responsiblePerson', 'budget']
        },
        'controls_implementation': {
            'label': 'risk_treatment_plan.section.controls_implementation'|trans({}, 'risk_treatment_plan'),
            'fields': ['controls', 'implementationNotes']
        }
    },
    'col_widths': {
        'risk': 6,
        'title': 6,
        'description': 12,
        'status': 4,
        'priority': 4,
        'completionPercentage': 4,
        'startDate': 4,
        'targetCompletionDate': 4,
        'actualCompletionDate': 4,
        'responsiblePerson': 6,
        'budget': 6,
        'controls': 12,
        'implementationNotes': 12
    }
} %}

<div class="form-actions">
    <button type="submit" class="btn btn-primary">
        <i class="bi bi-check-circle" aria-hidden="true"></i> {{ 'common.create'|trans({}, 'messages') }}
    </button>
    <a href="{{ path('app_risk_treatment_plan_index') }}" class="btn btn-secondary">
        {{ 'common.cancel'|trans({}, 'messages') }}
    </a>
</div>

{{ form_end(form) }}

<style>
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-xl);
}

.button-group {
    display: flex;
    gap: var(--spacing-sm);
}

.form-actions {
    margin-top: var(--spacing-lg);
    display: flex;
    gap: var(--spacing-sm);
}
</style>
{% endblock %}
