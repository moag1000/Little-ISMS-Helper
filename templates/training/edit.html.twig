{% extends 'base.html.twig' %}
{% trans_default_domain 'training' %}

{% block title %}{{ 'training.edit'|trans({}, 'training')}} - {{ training.title }}{% endblock %}

{% block body %}
<div class="container">
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'nav.training'|trans({}, 'nav'), url: path('app_training_index') },
            { label: training.title, url: path('app_training_show', {id: training.id}) },
            { label: 'common.edit'|trans({}, 'messages') }
        ]
    } %}

    <div class="page-header">
        <h1>{{ 'training.edit'|trans({}, 'training')}}: {{ training.title }}</h1>
        <a href="{{ path('app_training_show', {id: training.id}) }}" class="btn btn-secondary">{{ 'common.back'|trans({}, 'messages') }}</a>
    </div>

    <div class="card">
        <div class="card-body">
            {{ form_start(form) }}
                {% include '_components/_auto_form.html.twig' with {
                    'form': form,
                    'sections': {
                        'basic_info': {
                            'label': 'training.section.basic_info'|trans({}, 'training'),
                            'fields': ['title', 'description', 'trainingType', 'deliveryMethod']
                        },
                        'schedule': {
                            'label': 'training.section.schedule'|trans({}, 'training'),
                            'fields': ['scheduledDate', 'duration', 'location']
                        },
                        'people': {
                            'label': 'training.section.people'|trans({}, 'training'),
                            'fields': ['trainer', 'targetAudience', 'participants']
                        },
                        'status': {
                            'label': 'training.section.status'|trans({}, 'training'),
                            'fields': ['status', 'mandatory']
                        },
                        'controls': {
                            'label': 'training.section.controls'|trans({}, 'training'),
                            'fields': ['coveredControls', 'complianceRequirements']
                        },
                        'materials': {
                            'label': 'training.section.materials'|trans({}, 'training'),
                            'fields': ['materials', 'feedback']
                        }
                    },
                    'col_widths': {
                        'title': 12,
                        'description': 12,
                        'trainingType': 6,
                        'deliveryMethod': 6,
                        'scheduledDate': 6,
                        'duration': 6,
                        'location': 12,
                        'trainer': 6,
                        'targetAudience': 6,
                        'participants': 12,
                        'status': 6,
                        'mandatory': 6,
                        'coveredControls': 12,
                        'complianceRequirements': 12,
                        'materials': 12,
                        'feedback': 12
                    },
                    'help_texts': {
                        'duration': 'training.help.duration'|trans({}, 'training'),
                        'participants': 'training.help.participants'|trans({}, 'training'),
                        'coveredControls': 'training.help.covered_controls'|trans({}, 'training'),
                        'complianceRequirements': 'training.help.compliance_requirements'|trans({}, 'training'),
                        'materials': 'training.help.materials'|trans({}, 'training'),
                        'feedback': 'training.help.feedback'|trans({}, 'training')}
                } %}

                <div class="d-flex justify-content-between mt-4">
                    <a href="{{ path('app_training_show', {id: training.id}) }}" class="btn btn-secondary">
                        {{ 'common.cancel'|trans({}, 'messages') }}
                    </a>
                    <button type="submit" class="btn btn-primary">
                        {{ 'common.save_changes'|trans({}, 'messages') }}
                    </button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}
