{% extends 'base.html.twig' %}

{% block title %}Edit {{ processing_activity.name }}{% endblock %}

{% block body %}
<div class="container-fluid mt-4">
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'GDPR', url: path('app_processing_activity_index'), icon: 'bi-shield-check' },
            { label: 'VVT', url: path('app_processing_activity_index') },
            { label: processing_activity.name, url: path('app_processing_activity_show', {id: processing_activity.id}) },
            { label: 'Edit' }
        ]
    } %}

    {% include '_components/_page_header.html.twig' with {
        title: 'Edit Processing Activity',
        subtitle: processing_activity.name,
        icon: 'bi-pencil'
    } %}

    {% include 'processing_activity/_form.html.twig' %}

    {# Delete Button #}
    {% if is_granted('ROLE_MANAGER') %}
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="text-danger">Danger Zone</h5>
                <p>{{ 'processing_activity.permanently_delete'|trans }}</p>
                <form method="post" action="{{ path('app_processing_activity_delete', {id: processing_activity.id}) }}" onsubmit="return confirm('Are you sure you want to delete this processing activity?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ processing_activity.id) }}">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash" aria-hidden="true"></i> Delete Processing Activity
                    </button>
                </form>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
