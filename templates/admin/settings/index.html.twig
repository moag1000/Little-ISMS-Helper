{% extends 'admin/layout.html.twig' %}
{% trans_default_domain 'admin'%}
{% block admin_title %}{{ 'admin.settings.title'|trans({}, 'admin') }}{% endblock %}
{% block admin_subtitle %}
    <p class="text-muted">{{ 'admin.settings.subtitle'|trans({}, 'admin') }}</p>
{% endblock %}

{% block breadcrumb_items %}
    <li class="breadcrumb-item active">{{ 'admin.settings.title'|trans({}, 'admin') }}</li>
{% endblock %}

{% block admin_content %}
    <div class="row g-4">
        {# Application Settings Card #}
        <div class="col-md-6 col-lg-4">
            {% embed '_components/_card.html.twig' with { 'class': 'h-100' } %}
                {% block card_body %}
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-primary bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-gear-fill text-primary fs-2" aria-hidden="true"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h2 class="card-title h5">{{ 'admin.settings.application.title'|trans({}, 'admin') }}</h2>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.application.description'|trans({}, 'admin') }}
                            </p>
                        </div>
                    </div>
                    {% if settings.application is defined %}
                        <ul class="list-unstyled small">
                            <li><strong>{{ 'admin.settings.application.locale'|trans({}, 'admin') }}:</strong> {{ settings.application.default_locale ?? 'de' }}</li>
                            <li><strong>{{ 'admin.settings.application.timezone'|trans({}, 'admin') }}:</strong> {{ settings.application.timezone ?? 'Europe/Berlin' }}</li>
                            <li><strong>{{ 'admin.settings.application.items_per_page'|trans({}, 'admin') }}:</strong> {{ settings.application.items_per_page ?? 25 }}</li>
                        </ul>
                    {% endif %}
                {% endblock %}
                {% block card_footer %}
                    <div class="card-footer bg-transparent">
                        <a href="{{ path('admin_settings_application') }}" class="btn btn-sm btn-primary w-100">
                            <i class="bi bi-pencil" aria-hidden="true"></i> {{ 'admin.settings.configure'|trans({}, 'admin') }}
                        </a>
                    </div>
                {% endblock %}
            {% endembed %}
        </div>

        {# Security Settings Card #}
        <div class="col-md-6 col-lg-4">
            {% embed '_components/_card.html.twig' with { 'class': 'h-100' } %}
                {% block card_body %}
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-danger bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-shield-lock-fill text-danger fs-2" aria-hidden="true"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h2 class="card-title h5">{{ 'admin.settings.security.title'|trans({}, 'admin') }}</h2>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.security.description'|trans({}, 'admin') }}
                            </p>
                        </div>
                    </div>
                    {% if settings.security is defined %}
                        <ul class="list-unstyled small">
                            <li><strong>{{ 'admin.settings.security.session_lifetime'|trans({}, 'admin') }}:</strong> {{ (settings.security.session_lifetime ?? 3600) / 60 }} min</li>
                            <li><strong>{{ 'admin.settings.security.max_login_attempts'|trans({}, 'admin') }}:</strong> {{ settings.security.max_login_attempts ?? 5 }}</li>
                            <li><strong>{{ 'admin.settings.security.require_2fa'|trans({}, 'admin') }}:</strong> {{ settings.security.require_2fa ? 'Yes' : 'No' }}</li>
                        </ul>
                    {% endif %}
                {% endblock %}
                {% block card_footer %}
                    <div class="card-footer bg-transparent">
                        <a href="{{ path('admin_settings_security') }}" class="btn btn-sm btn-danger w-100">
                            <i class="bi bi-pencil" aria-hidden="true"></i> {{ 'admin.settings.configure'|trans({}, 'admin') }}
                        </a>
                    </div>
                {% endblock %}
            {% endembed %}
        </div>

        {# Feature Flags Card #}
        <div class="col-md-6 col-lg-4">
            {% embed '_components/_card.html.twig' with { 'class': 'h-100' } %}
                {% block card_body %}
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-success bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-toggles2 text-success fs-2" aria-hidden="true"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h2 class="card-title h5">{{ 'admin.settings.features.title'|trans({}, 'admin') }}</h2>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.features.description'|trans({}, 'admin') }}
                            </p>
                        </div>
                    </div>
                    {% if settings.features is defined %}
                        <ul class="list-unstyled small">
                            <li>
                                {% if settings.features.enable_dark_mode %}
                                    <i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted" aria-hidden="true"></i>
                                {% endif %}
                                {{ 'admin.settings.features.dark_mode'|trans({}, 'admin') }}
                            </li>
                            <li>
                                {% if settings.features.enable_global_search %}
                                    <i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted" aria-hidden="true"></i>
                                {% endif %}
                                {{ 'admin.settings.features.global_search'|trans({}, 'admin') }}
                            </li>
                            <li>
                                {% if settings.features.enable_audit_log %}
                                    <i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted" aria-hidden="true"></i>
                                {% endif %}
                                {{ 'admin.settings.features.audit_log'|trans({}, 'admin') }}
                            </li>
                        </ul>
                    {% endif %}
                {% endblock %}
                {% block card_footer %}
                    <div class="card-footer bg-transparent">
                        <a href="{{ path('admin_settings_features') }}" class="btn btn-sm btn-success w-100">
                            <i class="bi bi-pencil" aria-hidden="true"></i> {{ 'admin.settings.configure'|trans({}, 'admin') }}
                        </a>
                    </div>
                {% endblock %}
            {% endembed %}
        </div>
    </div>

    {# Info Alert #}
    <div class="alert alert-info mt-4">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        <strong>{{ 'admin.settings.info_title'|trans({}, 'admin') }}</strong><br>
        {{ 'admin.settings.info_text'|trans({}, 'admin') }}
    </div>
{% endblock %}
