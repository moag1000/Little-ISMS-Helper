{% extends 'admin/layout.html.twig' %}

{% block admin_title %}{{ 'admin.settings.title'|trans }}{% endblock %}
{% block admin_subtitle %}
    <p class="text-muted">{{ 'admin.settings.subtitle'|trans }}</p>
{% endblock %}

{% block breadcrumb_items %}
    <li class="breadcrumb-item active">{{ 'admin.settings.title'|trans }}</li>
{% endblock %}

{% block admin_content %}
    <div class="row g-4">
        {# Application Settings Card #}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-primary bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-gear-fill text-primary fs-2"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h5 class="card-title">{{ 'admin.settings.application.title'|trans }}</h5>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.application.description'|trans }}
                            </p>
                        </div>
                    </div>
                    {% if settings.application is defined %}
                        <ul class="list-unstyled small">
                            <li><strong>{{ 'admin.settings.application.locale'|trans }}:</strong> {{ settings.application.default_locale ?? 'de' }}</li>
                            <li><strong>{{ 'admin.settings.application.timezone'|trans }}:</strong> {{ settings.application.timezone ?? 'Europe/Berlin' }}</li>
                            <li><strong>{{ 'admin.settings.application.items_per_page'|trans }}:</strong> {{ settings.application.items_per_page ?? 25 }}</li>
                        </ul>
                    {% endif %}
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ path('admin_settings_application') }}" class="btn btn-sm btn-primary w-100">
                        <i class="bi bi-pencil"></i> {{ 'admin.settings.configure'|trans }}
                    </a>
                </div>
            </div>
        </div>

        {# Security Settings Card #}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-danger bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-shield-lock-fill text-danger fs-2"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h5 class="card-title">{{ 'admin.settings.security.title'|trans }}</h5>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.security.description'|trans }}
                            </p>
                        </div>
                    </div>
                    {% if settings.security is defined %}
                        <ul class="list-unstyled small">
                            <li><strong>{{ 'admin.settings.security.session_lifetime'|trans }}:</strong> {{ (settings.security.session_lifetime ?? 3600) / 60 }} min</li>
                            <li><strong>{{ 'admin.settings.security.max_login_attempts'|trans }}:</strong> {{ settings.security.max_login_attempts ?? 5 }}</li>
                            <li><strong>{{ 'admin.settings.security.require_2fa'|trans }}:</strong> {{ settings.security.require_2fa ? 'Yes' : 'No' }}</li>
                        </ul>
                    {% endif %}
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ path('admin_settings_security') }}" class="btn btn-sm btn-danger w-100">
                        <i class="bi bi-pencil"></i> {{ 'admin.settings.configure'|trans }}
                    </a>
                </div>
            </div>
        </div>

        {# Feature Flags Card #}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-success bg-opacity-10 p-3 rounded me-3">
                            <i class="bi bi-toggles2 text-success fs-2"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h5 class="card-title">{{ 'admin.settings.features.title'|trans }}</h5>
                            <p class="card-text text-muted small">
                                {{ 'admin.settings.features.description'|trans }}
                            </p>
                        </div>
                    </div>
                    {% if settings.features is defined %}
                        <ul class="list-unstyled small">
                            <li>
                                {% if settings.features.enable_dark_mode %}
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted"></i>
                                {% endif %}
                                {{ 'admin.settings.features.dark_mode'|trans }}
                            </li>
                            <li>
                                {% if settings.features.enable_global_search %}
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted"></i>
                                {% endif %}
                                {{ 'admin.settings.features.global_search'|trans }}
                            </li>
                            <li>
                                {% if settings.features.enable_audit_log %}
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                {% else %}
                                    <i class="bi bi-x-circle text-muted"></i>
                                {% endif %}
                                {{ 'admin.settings.features.audit_log'|trans }}
                            </li>
                        </ul>
                    {% endif %}
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ path('admin_settings_features') }}" class="btn btn-sm btn-success w-100">
                        <i class="bi bi-pencil"></i> {{ 'admin.settings.configure'|trans }}
                    </a>
                </div>
            </div>
        </div>
    </div>

    {# Info Alert #}
    <div class="alert alert-info mt-4">
        <i class="bi bi-info-circle"></i>
        <strong>{{ 'admin.settings.info_title'|trans }}</strong><br>
        {{ 'admin.settings.info_text'|trans }}
    </div>
{% endblock %}
