{% extends 'base.html.twig' %}

{% block title %}Reports & Exports - {{ parent() }}{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    <h1 class="h2 mb-4">
        <i class="bi bi-file-earmark-bar-graph" aria-hidden="true"></i> Reports & Exports
    </h1>

    <div class="alert alert-info mb-4">
        <i class="bi bi-info-circle" aria-hidden="true"></i> Generate comprehensive reports in PDF or Excel format for compliance documentation and management reviews.
    </div>

    <div class="row">
        {# Dashboard Report #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0"><i class="bi bi-speedometer2" aria-hidden="true"></i> Dashboard Summary</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">Comprehensive ISMS overview with all key metrics and statistics.</p>
                    <ul class="small mb-3">
                        <li>Assets & Risks Overview</li>
                        <li>Control Implementation Status</li>
                        <li>Incident Summary</li>
                        <li>Compliance Percentage</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid gap-2">
                        <a href="{{ path('app_reports_dashboard_pdf') }}" class="btn btn-sm btn-outline-danger" data-turbo="false">
                            <i class="bi bi-file-pdf" aria-hidden="true"></i> Download PDF
                        </a>
                        <a href="{{ path('app_reports_dashboard_excel') }}" class="btn btn-sm btn-outline-success" data-turbo="false">
                            <i class="bi bi-file-excel" aria-hidden="true"></i> Download Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {# Risk Register #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-danger text-white">
                    <h3 class="mb-0"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Risk Register</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">Complete risk assessment documentation with likelihood, impact, and treatment plans.</p>
                    <ul class="small mb-3">
                        <li>All identified risks</li>
                        <li>Risk scores & levels</li>
                        <li>Treatment strategies</li>
                        <li>Risk owners</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid gap-2">
                        <a href="{{ path('app_reports_risks_pdf') }}" class="btn btn-sm btn-outline-danger" data-turbo="false">
                            <i class="bi bi-file-pdf" aria-hidden="true"></i> Download PDF
                        </a>
                        <a href="{{ path('app_reports_risks_excel') }}" class="btn btn-sm btn-outline-success" data-turbo="false">
                            <i class="bi bi-file-excel" aria-hidden="true"></i> Download Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {# Statement of Applicability #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h3 class="mb-0"><i class="bi bi-shield-check" aria-hidden="true"></i> Statement of Applicability</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">ISO 27001 Annex A controls documentation with applicability justification.</p>
                    <ul class="small mb-3">
                        <li>All 93 ISO 27001:2022 controls</li>
                        <li>Applicability status</li>
                        <li>Implementation progress</li>
                        <li>Justifications</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid gap-2">
                        <a href="{{ path('app_reports_controls_pdf') }}" class="btn btn-sm btn-outline-danger" data-turbo="false">
                            <i class="bi bi-file-pdf" aria-hidden="true"></i> Download PDF
                        </a>
                        <a href="{{ path('app_reports_controls_excel') }}" class="btn btn-sm btn-outline-success" data-turbo="false">
                            <i class="bi bi-file-excel" aria-hidden="true"></i> Download Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {# Incident Log #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h3 class="mb-0"><i class="bi bi-bell" aria-hidden="true"></i> Incident Log</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">Complete incident management records with timeline and resolutions.</p>
                    <ul class="small mb-3">
                        <li>All security incidents</li>
                        <li>Severity classifications</li>
                        <li>Response timelines</li>
                        <li>Resolution status</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid gap-2">
                        <a href="{{ path('app_reports_incidents_pdf') }}" class="btn btn-sm btn-outline-danger" data-turbo="false">
                            <i class="bi bi-file-pdf" aria-hidden="true"></i> Download PDF
                        </a>
                        <a href="{{ path('app_reports_incidents_excel') }}" class="btn btn-sm btn-outline-success" data-turbo="false">
                            <i class="bi bi-file-excel" aria-hidden="true"></i> Download Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {# Training Log #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0"><i class="bi bi-mortarboard" aria-hidden="true"></i> Training Log</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">Security awareness and training documentation with attendance records.</p>
                    <ul class="small mb-3">
                        <li>All conducted trainings</li>
                        <li>Participant lists</li>
                        <li>Training types & methods</li>
                        <li>Mandatory trainings</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid gap-2">
                        <a href="{{ path('app_reports_trainings_pdf') }}" class="btn btn-sm btn-outline-danger" data-turbo="false">
                            <i class="bi bi-file-pdf" aria-hidden="true"></i> Download PDF
                        </a>
                        <a href="{{ path('app_reports_trainings_excel') }}" class="btn btn-sm btn-outline-success" data-turbo="false">
                            <i class="bi bi-file-excel" aria-hidden="true"></i> Download Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {# Placeholder for more reports #}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm border-secondary" style="opacity: 0.7;">
                <div class="card-header bg-secondary text-white">
                    <h3 class="mb-0"><i class="bi bi-file-earmark-plus" aria-hidden="true"></i> Custom Reports</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted">Additional custom reports coming soon:</p>
                    <ul class="small mb-3">
                        <li>Audit Summary Reports</li>
                        <li>Management Review Reports</li>
                        <li>Asset Inventory</li>
                        <li>Compliance Gap Analysis</li>
                    </ul>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-grid">
                        <button class="btn btn-sm btn-outline-secondary" disabled>
                            <i class="bi bi-hourglass-split" aria-hidden="true"></i> Coming Soon
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Best Practices Section #}
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h3 class="mb-0"><i class="bi bi-lightbulb" aria-hidden="true"></i> Best Practices for Reports</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h4>For Audits & Compliance:</h4>
                            <ul class="small">
                                <li>Generate Statement of Applicability before audits</li>
                                <li>Include Risk Register in management reviews</li>
                                <li>Document incident trends over time</li>
                                <li>Track training completion rates</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h4>For Management Reporting:</h4>
                            <ul class="small">
                                <li>Use Dashboard Summary for executive overviews</li>
                                <li>Highlight high-risk items from Risk Register</li>
                                <li>Show control implementation progress</li>
                                <li>Report on mandatory training completion</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
