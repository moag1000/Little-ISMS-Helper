{% extends 'base.html.twig' %}
{% trans_default_domain 'bc_exercises' %}

{% block title %}{{ 'bc_exercises.action.edit'|trans({}, 'bcm') }}: {{ bc_exercise.name }}{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    {# Breadcrumb Navigation #}
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'nav.bcm'|trans({}, 'nav', 'nav')|default('BCM'), url: path('app_bc_exercise_index'), icon: 'bi-shield-exclamation' },
            { label: 'bc_exercises.page.title'|trans({}, 'bcm')|default('BC Exercises'), url: path('app_bc_exercise_index') },
            { label: bc_exercise.name, url: path('app_bc_exercise_show', {id: bc_exercise.id}) },
            { label: 'common.edit'|trans({}, 'messages')|default('Edit') }
        ]
    } %}

    {# Page Header #}
    {% include '_components/_page_header.html.twig' with {
        title: ('bc_exercises.action.edit'|trans({}, 'bcm')) ~ ': ' ~ bc_exercise.name,
        icon: 'bi-pencil',
        actions: [
            { label: 'common.view'|trans({}, 'messages')|default('View'), url: path('app_bc_exercise_show', {id: bc_exercise.id}), variant: 'outline-primary', icon: 'bi-eye' },
            { label: 'common.back'|trans({}, 'messages'), url: path('app_bc_exercise_index'), variant: 'secondary', icon: 'bi-arrow-left' }
        ]
    } %}

    <div class="row">
        <div class="col-lg-10 col-xl-9 mx-auto">
            <div class="card">
                <div class="card-body">
                    {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

                    {# Basic Information Section #}
                    <fieldset class="mb-4">
                        <legend class="h5 mb-3">
                            <i class="bi bi-info-square" aria-hidden="true"></i>
                            {{ 'bc_exercises.section.details'|trans({}, 'bcm')|default('Basic Information') }}
                        </legend>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.name,
                            'label': 'bc_exercises.table.name'|trans({}, 'bcm')|default('Exercise Name'),
                            'help': 'bc_exercises.section.details'|trans({}, 'bcm')|default('Descriptive name for the exercise'),
                            'required': true
                        } %}

                        <div class="row">
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.exerciseType,
                                    'label': 'bc_exercises.table.type'|trans({}, 'bcm')|default('Exercise Type'),
                                    'help': 'bc_exercises.section.scenario'|trans({}, 'bcm')|default('Type of business continuity exercise')
                                } %}
                            </div>
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.status,
                                    'label': 'bc_exercises.table.status'|trans({}, 'bcm')|default('Status'),
                                    'help': 'bc_exercises.table.status'|trans({}, 'bcm')|default('Current status of the exercise')
                                } %}
                            </div>
                        </div>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.description,
                            'label': 'bc_exercises.section.details'|trans({}, 'bcm')|default('Description'),
                            'help': 'bc_exercises.section.details'|trans({}, 'bcm')|default('Detailed description of the exercise')
                        } %}

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.scope,
                            'label': 'bc_exercises.section.scope_objectives'|trans({}, 'bcm')|default('Scope'),
                            'help': 'bc_exercises.section.scope_objectives'|trans({}, 'bcm')|default('Scope and boundaries of the exercise')
                        } %}
                    </fieldset>

                    {# Planning Section #}
                    <fieldset class="mb-4">
                        <legend class="h5 mb-3">
                            <i class="bi bi-calendar-event" aria-hidden="true"></i>
                            {{ 'bc_exercises.section.scenario'|trans({}, 'bcm')|default('Planning') }}
                        </legend>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.objectives,
                            'label': 'bc_exercises.section.scope_objectives'|trans({}, 'bcm')|default('Objectives'),
                            'help': 'bc_exercises.section.scope_objectives'|trans({}, 'bcm')|default('Goals and objectives of the exercise')
                        } %}

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.scenario,
                            'label': 'bc_exercises.section.scenario'|trans({}, 'bcm')|default('Scenario'),
                            'help': 'bc_exercises.section.scenario'|trans({}, 'bcm')|default('The scenario to be tested')
                        } %}

                        <div class="row">
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.exerciseDate,
                                    'label': 'bc_exercises.field.exercise_date'|trans({}, 'bcm')|default('Exercise Date'),
                                    'help': 'bc_exercises.field.exercise_date'|trans({}, 'bcm')|default('Scheduled date for the exercise')
                                } %}
                            </div>
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.durationHours,
                                    'label': 'bc_exercises.field.duration_hours'|trans({}, 'bcm')|default('Duration (Hours)'),
                                    'help': 'bc_exercises.field.duration_hours'|trans({}, 'bcm')|default('Expected duration in hours')
                                } %}
                            </div>
                        </div>
                    </fieldset>

                    {# Participants Section #}
                    <fieldset class="mb-4">
                        <legend class="h5 mb-3">
                            <i class="bi bi-people" aria-hidden="true"></i>
                            {{ 'bc_exercises.section.participants'|trans({}, 'bcm')|default('Participants') }}
                        </legend>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.participants,
                            'label': 'bc_exercises.field.participants'|trans({}, 'bcm')|default('Participants'),
                            'help': 'bc_exercises.section.participants'|trans({}, 'bcm')|default('List of participants in the exercise')
                        } %}

                        <div class="row">
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.facilitator,
                                    'label': 'bc_exercises.field.facilitator'|trans({}, 'bcm')|default('Facilitator'),
                                    'help': 'bc_exercises.field.facilitator'|trans({}, 'bcm')|default('Person responsible for facilitating')
                                } %}
                            </div>
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.observers,
                                    'label': 'bc_exercises.field.observers'|trans({}, 'bcm')|default('Observers'),
                                    'help': 'bc_exercises.field.observers'|trans({}, 'bcm')|default('List of observers')
                                } %}
                            </div>
                        </div>
                    </fieldset>

                    {# Results Section #}
                    <fieldset class="mb-4">
                        <legend class="h5 mb-3">
                            <i class="bi bi-clipboard-check" aria-hidden="true"></i>
                            {{ 'bc_exercises.section.results'|trans({}, 'bcm')|default('Results') }}
                        </legend>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.results,
                            'label': 'bc_exercises.section.results'|trans({}, 'bcm')|default('Results'),
                            'help': 'bc_exercises.section.results'|trans({}, 'bcm')|default('Summary of exercise results')
                        } %}

                        <div class="row">
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.whatWentWell,
                                    'label': 'bc_exercises.section.what_went_well'|trans({}, 'bcm')|default('What Went Well'),
                                    'help': 'bc_exercises.section.what_went_well'|trans({}, 'bcm')|default('Positive outcomes')
                                } %}
                            </div>
                            <div class="col-md-6">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.areasForImprovement,
                                    'label': 'bc_exercises.section.improvements'|trans({}, 'bcm')|default('Areas for Improvement'),
                                    'help': 'bc_exercises.section.improvements'|trans({}, 'bcm')|default('Areas that need improvement')
                                } %}
                            </div>
                        </div>

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.findings,
                            'label': 'bc_exercises.section.findings'|trans({}, 'bcm')|default('Findings'),
                            'help': 'bc_exercises.section.findings'|trans({}, 'bcm')|default('Key findings from the exercise')
                        } %}

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.actionItems,
                            'label': 'bc_exercises.section.action_items'|trans({}, 'bcm')|default('Action Items'),
                            'help': 'bc_exercises.section.action_items'|trans({}, 'bcm')|default('Follow-up actions required')
                        } %}

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.lessonsLearned,
                            'label': 'bc_exercises.section.lessons_learned'|trans({}, 'bcm')|default('Lessons Learned'),
                            'help': 'bc_exercises.section.lessons_learned'|trans({}, 'bcm')|default('Key lessons from the exercise')
                        } %}

                        {% include '_components/_form_field.html.twig' with {
                            'field': form.planUpdatesRequired,
                            'label': 'bc_exercises.section.plan_updates_required'|trans({}, 'bcm')|default('Plan Updates Required'),
                            'help': 'bc_exercises.section.plan_updates_required'|trans({}, 'bcm')|default('Updates needed for BC plans')
                        } %}
                    </fieldset>

                    {# Report Section #}
                    <fieldset class="mb-4">
                        <legend class="h5 mb-3">
                            <i class="bi bi-file-earmark-text" aria-hidden="true"></i>
                            {{ 'bc_exercises.section.results'|trans({}, 'bcm')|default('Report') }}
                        </legend>

                        <div class="row">
                            <div class="col-md-4">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.successRating,
                                    'label': 'bc_exercises.field.success_rating'|trans({}, 'bcm')|default('Success Rating'),
                                    'help': 'bc_exercises.field.success_rating'|trans({}, 'bcm')|default('Overall success rating (1-5)')
                                } %}
                            </div>
                            <div class="col-md-4">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.reportCompleted,
                                    'label': 'bc_exercises.field.report_completed'|trans({}, 'bcm')|default('Report Completed'),
                                    'help': 'bc_exercises.field.report_completed'|trans({}, 'bcm')|default('Has the report been completed?')
                                } %}
                            </div>
                            <div class="col-md-4">
                                {% include '_components/_form_field.html.twig' with {
                                    'field': form.reportDate,
                                    'label': 'bc_exercises.field.report_date'|trans({}, 'bcm')|default('Report Date'),
                                    'help': 'bc_exercises.field.report_date'|trans({}, 'bcm')|default('Date the report was completed')
                                } %}
                            </div>
                        </div>
                    </fieldset>

                    {# Form Actions #}
                    <div class="form-actions d-flex gap-2 justify-content-between pt-3 border-top">
                        <a href="{{ path('app_bc_exercise_show', {id: bc_exercise.id}) }}" class="btn btn-secondary">
                            <i class="bi bi-x-circle" aria-hidden="true"></i>
                            {{ 'common.cancel'|trans({}, 'messages') }}
                        </a>
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-save" aria-hidden="true"></i>
                            {{ 'common.save'|trans({}, 'messages') }}
                        </button>
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
