{% extends 'base.html.twig' %}
{% trans_default_domain 'bc_exercises' %}

{% block title %}{{ 'bc_exercises.action.add_new'|trans({}, 'bc_exercises') }} - {{ parent() }}{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    {# Breadcrumb Navigation #}
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'nav.bcm'|trans({}, 'nav', 'nav'), url: path('app_bc_exercise_index'), icon: 'bi-shield-exclamation' },
            { label: 'bc_exercises.page.title'|trans({}, 'bc_exercises'), url: path('app_bc_exercise_index') },
            { label: 'bc_exercises.action.add_new'|trans({}, 'bc_exercises') }
        ]
    } %}

    {# Page Header #}
    {% include '_components/_page_header.html.twig' with {
        title: 'bc_exercises.action.add_new'|trans({}, 'bc_exercises'),
        icon: 'bi-plus-circle',
        actions: [
            { label: 'common.back'|trans({}, 'messages'), url: path('app_bc_exercise_index'), variant: 'secondary', icon: 'bi-arrow-left' }
        ]
    } %}

    <div class="row">
        <div class="col-lg-10 col-xl-9 mx-auto">
            <div class="card">
                <div class="card-body">
                    {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

                    {% include '_components/_auto_form.html.twig' with {
                        'form': form,
                        'sections': {
                            'details': {
                                'label': 'bc_exercises.section.details'|trans({}, 'bc_exercises'),
                                'fields': ['name', 'exerciseType', 'status', 'description', 'scope']
                            },
                            'planning': {
                                'label': 'bc_exercises.section.scenario'|trans({}, 'bc_exercises'),
                                'fields': ['objectives', 'scenario', 'exerciseDate', 'durationHours']
                            },
                            'participants': {
                                'label': 'bc_exercises.section.participants'|trans({}, 'bc_exercises'),
                                'fields': ['participants', 'facilitator', 'observers']
                            },
                            'results': {
                                'label': 'bc_exercises.section.results'|trans({}, 'bc_exercises'),
                                'fields': ['results', 'whatWentWell', 'areasForImprovement', 'findings', 'actionItems', 'lessonsLearned', 'planUpdatesRequired']
                            },
                            'report': {
                                'label': 'bc_exercises.section.report'|trans({}, 'bc_exercises'),
                                'fields': ['successRating', 'reportCompleted', 'reportDate']
                            }
                        },
                        'col_widths': {
                            'name': 12,
                            'exerciseType': 6,
                            'status': 6,
                            'description': 12,
                            'scope': 12,
                            'objectives': 12,
                            'scenario': 12,
                            'exerciseDate': 6,
                            'durationHours': 6,
                            'participants': 12,
                            'facilitator': 6,
                            'observers': 6,
                            'results': 12,
                            'whatWentWell': 6,
                            'areasForImprovement': 6,
                            'findings': 12,
                            'actionItems': 12,
                            'lessonsLearned': 12,
                            'planUpdatesRequired': 12,
                            'successRating': 4,
                            'reportCompleted': 4,
                            'reportDate': 4
                        }
                    } %}

                    {# Form Actions #}
                    <div class="form-actions d-flex gap-2 justify-content-between pt-3 border-top">
                        <a href="{{ path('app_bc_exercise_index') }}" class="btn btn-secondary">
                            <i class="bi bi-x-circle" aria-hidden="true"></i>
                            {{ 'common.cancel'|trans({}, 'messages') }}
                        </a>
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-save" aria-hidden="true"></i>
                            {{ 'common.save'|trans({}, 'messages') }}
                        </button>
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
