{% extends 'base.html.twig' %}
{% trans_default_domain 'people' %}

{% block title %}{{ person.fullName }} - {{ 'person.title.show'|trans }} - Little ISMS Helper{% endblock %}

{% block body %}
<div class="page-header">
    <div>
        <h1>{{ person.fullName }}</h1>
        <div class="mt-2">
            {% set typeColors = {
                'employee': 'success',
                'contractor': 'info',
                'visitor': 'warning',
                'vendor': 'info',
                'auditor': 'danger',
                'consultant': 'info'
            } %}
            <span class="badge badge-{{ typeColors[person.personType] ?? 'secondary' }}">
                {{ ('person.type.' ~ person.personType)|trans }}
            </span>
            {% if person.badgeId %}
                <code class="ml-sm">{{ person.badgeId }}</code>
            {% endif %}
        </div>
    </div>
    <div class="button-group">
        <a href="{{ path('app_person_edit', {id: person.id}) }}" class="btn btn-primary">
            ‚úèÔ∏è {{ 'common.edit'|trans({}, 'messages') }}
        </a>
        <a href="{{ path('app_person_index') }}" class="btn btn-secondary">
            ‚Üê {{ 'common.back_to_list'|trans({}, 'messages') }}
        </a>
    </div>
</div>

{# Person Details #}
<div class="card mb-4">
    <h2>{{ 'person.section.details'|trans }}</h2>

    <div class="stats-grid mt-3 grid-responsive-250">
        <div class="stat-item">
            <strong>{{ person.fullName }}</strong>
            <span>{{ 'person.field.name'|trans }}</span>
        </div>

        <div class="stat-item">
            <strong>{{ ('person.type.' ~ person.personType)|trans }}</strong>
            <span>{{ 'person.field.type'|trans }}</span>
        </div>

        {% if person.badgeId %}
        <div class="stat-item">
            <strong><code>{{ person.badgeId }}</code></strong>
            <span>{{ 'person.field.badge_id'|trans }}</span>
        </div>
        {% endif %}

        {% if person.company %}
        <div class="stat-item">
            <strong>{{ person.company }}</strong>
            <span>{{ 'person.field.company'|trans }}</span>
        </div>
        {% endif %}

        {% if person.department %}
        <div class="stat-item">
            <strong>{{ person.department }}</strong>
            <span>{{ 'person.field.department'|trans }}</span>
        </div>
        {% endif %}

        {% if person.jobTitle %}
        <div class="stat-item">
            <strong>{{ person.jobTitle }}</strong>
            <span>{{ 'person.field.job_title'|trans }}</span>
        </div>
        {% endif %}
    </div>
</div>

{# Contact Information #}
<div class="card mb-4">
    <h2>{{ 'person.section.contact'|trans }}</h2>
    <div class="stats-grid mt-3 grid-responsive-250">
        <div class="stat-item">
            <strong>
                {% if person.email %}
                    <a href="mailto:{{ person.email }}">{{ person.email }}</a>
                {% else %}
                    <span class="text-muted-color">-</span>
                {% endif %}
            </strong>
            <span>{{ 'person.field.email'|trans }}</span>
        </div>

        <div class="stat-item">
            <strong>
                {% if person.phone %}
                    <a href="tel:{{ person.phone }}">{{ person.phone }}</a>
                {% else %}
                    <span class="text-muted-color">-</span>
                {% endif %}
            </strong>
            <span>{{ 'person.field.phone'|trans }}</span>
        </div>
    </div>
</div>

{# Additional Information #}
{% if person.notes %}
<div class="card mb-4">
    <h2>{{ 'person.section.notes'|trans }}</h2>
    <div class="info-box mt-2 bg-light">
        <p class="pre-wrap">{{ person.notes }}</p>
    </div>
</div>
{% endif %}

{# Action Buttons #}
<div class="button-group mt-xl">
    <a href="{{ path('app_person_edit', {id: person.id}) }}" class="btn btn-primary">
        ‚úèÔ∏è {{ 'common.edit'|trans({}, 'messages') }}
    </a>
    <a href="{{ path('app_person_index') }}" class="btn btn-secondary">
        üìã {{ 'common.back_to_list'|trans({}, 'messages') }}
    </a>
    <form method="post" action="{{ path('app_person_delete', {id: person.id}) }}" onsubmit="return confirm('{{ 'person.confirm.delete'|trans }}');" class="d-inline">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ person.id) }}">
        <button type="submit" class="btn btn-danger">üóëÔ∏è {{ 'common.delete'|trans({}, 'messages') }}</button>
    </form>
</div>
{% endblock %}
