{% extends 'base.html.twig' %}
{% trans_default_domain 'people' %}

{% block title %}{{ 'person.title.edit'|trans({}, 'messages') }} - {{ person.fullName }} - Little ISMS Helper{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    {% include '_components/_breadcrumb.html.twig' with {
        breadcrumbs: [
            { label: 'nav.people'|trans({}, 'nav'), url: path('app_person_index') },
            { label: person.fullName, url: path('app_person_show', {id: person.id}) },
            { label: 'common.edit'|trans({}, 'messages') }
        ]
    } %}
</div>

<div class="page-header">
    <div>
        <h1>{{ 'person.title.edit'|trans({}, 'messages') }}: {{ person.fullName }}</h1>
    </div>
    <div class="button-group">
        <a href="{{ path('app_person_show', {id: person.id}) }}" class="btn btn-secondary">
            ‚Üê {{ 'common.back'|trans({}, 'messages') }}
        </a>
    </div>
</div>

<div class="card">
    <div class="card-content">
        {{ form_start(form) }}
            {% include '_components/_auto_form.html.twig' with {
                'form': form,
                'sections': {
                    'basic_info': {
                        'label': 'person.section.basic_info'|trans({}, 'messages'),
                        'fields': ['fullName', 'personType', 'badgeId']
                    },
                    'organization': {
                        'label': 'person.section.organization'|trans({}, 'messages'),
                        'fields': ['company', 'department', 'jobTitle']
                    },
                    'contact': {
                        'label': 'person.section.contact'|trans({}, 'messages'),
                        'fields': ['email', 'phone']
                    },
                    'access': {
                        'label': 'person.section.access'|trans({}, 'messages'),
                        'fields': ['linkedUser', 'active', 'accessValidFrom', 'accessValidUntil']
                    },
                    'additional': {
                        'label': 'person.section.additional'|trans({}, 'messages'),
                        'fields': ['notes']
                    }
                },
                'col_widths': {
                    'fullName': 6,
                    'personType': 6,
                    'badgeId': 12,
                    'company': 4,
                    'department': 4,
                    'jobTitle': 4,
                    'email': 6,
                    'phone': 6,
                    'linkedUser': 12,
                    'active': 12,
                    'accessValidFrom': 6,
                    'accessValidUntil': 6,
                    'notes': 12
                },
                'exclude': ['linkedUser', 'active', 'accessValidFrom', 'accessValidUntil']
            } %}

            <div class="d-flex justify-content-between mt-4">
                <a href="{{ path('app_person_show', {id: person.id}) }}" class="btn btn-secondary">
                    {{ 'common.cancel'|trans({}, 'messages') }}
                </a>
                <button type="submit" class="btn btn-primary">
                    {{ 'common.save'|trans({}, 'messages') }}
                </button>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}
