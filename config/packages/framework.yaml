# see https://symfony.com/doc/current/reference/configuration/framework.html
framework:
    secret: '%env(APP_SECRET)%'

    # Security: Comprehensive session configuration
    # Protects against session hijacking and fixation attacks (OWASP A07:2021)
    session:
        # Session storage configuration
        handler_id: session.handler.native_file
        save_path: '%kernel.project_dir%/var/sessions'

        # Session cookie security settings
        cookie_secure: 'auto'        # Only send cookie over HTTPS in production
        cookie_httponly: true         # Prevent JavaScript access to session cookie (XSS protection)
        cookie_samesite: 'lax'        # CSRF protection - lax allows top-level navigation (needed for login redirects)

        # Session management
        gc_maxlifetime: 3600          # Session lifetime: 1 hour
        gc_probability: 1
        gc_divisor: 100

        # Note: sid_length and sid_bits_per_character removed (deprecated in Symfony 7.2/PHP 8.4)
        # PHP now manages session ID generation automatically with secure defaults

    #esi: true
    #fragments: true

when@test:
    framework:
        test: true
        session:
            storage_factory_id: session.storage.factory.mock_file
